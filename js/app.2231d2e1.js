(function(t){function e(e){for(var c,u,i=e[0],a=e[1],s=e[2],l=0,b=[];l<i.length;l++)u=i[l],Object.prototype.hasOwnProperty.call(n,u)&&n[u]&&b.push(n[u][0]),n[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c]);d&&d(e);while(b.length)b.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],c=!0,i=1;i<r.length;i++){var a=r[i];0!==n[a]&&(c=!1)}c&&(o.splice(e--,1),t=u(u.s=r[0]))}return t}var c={},n={app:0},o=[];function u(e){if(c[e])return c[e].exports;var r=c[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=t,u.c=c,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)u.d(r,c,function(e){return t[e]}.bind(null,c));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/EWA22deploy/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var d=a;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0f89":function(t,e,r){},"1f68":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var c=r("7a23"),n=(r("b0c0"),{id:"nav"}),o=Object(c["h"])("Home"),u=Object(c["h"])("Cart");function i(t,e,r,i,a,s){var d=Object(c["x"])("router-link"),l=Object(c["x"])("router-view");return Object(c["s"])(),Object(c["f"])("div",null,[Object(c["g"])("div",n,[Object(c["i"])(d,{class:Object(c["o"])({active:"Home"===t.$route.name}),to:"/"},{default:Object(c["D"])((function(){return[o]})),_:1},8,["class"]),Object(c["i"])(d,{class:Object(c["o"])({active:"Cart"===t.$route.name}),to:"/cart"},{default:Object(c["D"])((function(){return[u]})),_:1},8,["class"])]),Object(c["i"])(l)])}var a={mounted:function(){this.$store.commit("updateCartFromLocalStorage")}},s=(r("a72e"),r("6b0d")),d=r.n(s);const l=d()(a,[["render",i]]);var b=l,f=r("6c02"),p={class:"home"},O={class:"wrapper"},j={class:"shop"},m={class:"input-container"},h={class:"product-cards-container"},g={class:"cart"};function v(t,e,r,n,o,u){var i=Object(c["x"])("ProductDescriptionDrawer"),a=Object(c["x"])("ProductSummaryCard"),s=Object(c["x"])("cart");return Object(c["s"])(),Object(c["f"])("div",p,[Object(c["g"])("div",O,[Object(c["g"])("div",j,[Object(c["g"])("div",m,[Object(c["E"])(Object(c["g"])("input",{type:"text",placeholder:"Buchtitel","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.BookSearchString=t})},null,512),[[c["B"],o.BookSearchString]])]),Object(c["i"])(i,{product:o.product,active:o.active.product_drawer,onCloseProductDrawer:e[1]||(e[1]=function(t){return u.closeProductDrawer()})},null,8,["product","active"]),Object(c["g"])("div",h,[(Object(c["s"])(!0),Object(c["f"])(c["a"],null,Object(c["w"])(u.filteredBooks,(function(t){return Object(c["s"])(),Object(c["d"])(a,{key:t.ProduktID,product:t,onViewProduct:e[2]||(e[2]=function(t){return u.viewProduct(t)})},null,8,["product"])})),128))])]),Object(c["g"])("div",g,[Object(c["i"])(s)])])])}var w=r("1da1"),k=(r("96cf"),r("d3b7"),r("4de4"),r("ac1f"),r("466d"),r("a4d3"),r("e01a"),{class:"card"}),y=["src"],P={class:"price"},C={class:"description"},S={class:"text-muted"};function _(t,e,r,n,o,u){return Object(c["s"])(),Object(c["f"])("div",k,[Object(c["g"])("img",{src:r.product.LinkGrafik,class:"productimg"},null,8,y),Object(c["g"])("h3",null,Object(c["z"])(r.product.Produkttitel),1),Object(c["g"])("h5",P,"Preis Netto:"+Object(c["z"])(r.product.PreisNetto)+" €",1),Object(c["g"])("p",C,"Kurzbeschreibung: "+Object(c["z"])(u.description),1),Object(c["g"])("p",S,Object(c["z"])(r.product.Autorname),1),Object(c["g"])("button",{class:"view-product-button",onClick:e[0]||(e[0]=function(e){return t.$emit("view-product",r.product)})}," Produktanzeige ")])}var I={props:["product"],computed:{description:function(){return this.product.Kurzinhalt.substring(0,150)}}};r("fb73");const x=d()(I,[["render",_]]);var D=x,z={key:0,class:"product-details"},$=["src"],B={class:"text-center"},q={class:"description"},F={class:"text-center"},T={key:0,class:"cart-total"},E=Object(c["g"])("h3",null,"Im Einkaufswagen",-1),H={class:"button-container"};function N(t,e,r,n,o,u){return Object(c["s"])(),Object(c["f"])("div",null,[Object(c["g"])("div",{class:Object(c["o"])(["drawer-background",{show:r.active}]),onClick:e[0]||(e[0]=function(e){return t.$emit("close-product-drawer")})},null,2),Object(c["g"])("div",{class:Object(c["o"])(["drawer",{show:r.active}])},[Object(c["g"])("div",{class:"drawer-close",onClick:e[1]||(e[1]=function(e){return t.$emit("close-product-drawer")})},"X"),r.product?(Object(c["s"])(),Object(c["f"])("div",z,[Object(c["g"])("img",{src:r.product.LinkGrafik,class:"productimg"},null,8,$),Object(c["g"])("h3",B,Object(c["z"])(r.product.Produkttitel),1),Object(c["g"])("p",q,Object(c["z"])(r.product.Kurzinhalt),1),Object(c["g"])("h3",F,Object(c["z"])(r.product.PreisNetto)+" €",1),u.product_total?(Object(c["s"])(),Object(c["f"])("div",T,[E,Object(c["g"])("h4",null,Object(c["z"])(u.product_total),1)])):Object(c["e"])("",!0),Object(c["g"])("div",H,[Object(c["g"])("button",{class:"remove",onClick:e[2]||(e[2]=function(t){return u.removeFromCart()})},"-"),Object(c["g"])("button",{class:"add",onClick:e[3]||(e[3]=function(t){return u.addToCart()})},"+")])])):Object(c["e"])("",!0)],2)])}var G={props:["product","active"],methods:{addToCart:function(){this.$store.commit("addToCart",this.product)},removeFromCart:function(){this.$store.commit("removeFromCart",this.product)}},computed:{product_total:function(){return console.log(this.$store.getters.productQuantity(this.product)),this.$store.getters.productQuantity(this.product)}}};r("f560");const J=d()(G,[["render",N]]);var L=J,M=Object(c["g"])("h1",null,"Ihr Einkaufswagen",-1);function A(t,e,r,n,o,u){var i=Object(c["x"])("CartItemCard"),a=Object(c["x"])("CartSummaryPaymentCard");return Object(c["s"])(),Object(c["f"])("div",null,[M,(Object(c["s"])(!0),Object(c["f"])(c["a"],null,Object(c["w"])(u.items,(function(t){return Object(c["s"])(),Object(c["d"])(i,{key:t.ProduktID,item:t},null,8,["item"])})),128)),Object(c["i"])(a,{items:u.items},null,8,["items"])])}r("b680");var K={class:"cart-item-card"},Q={class:"header"};function R(t,e,r,n,o,u){return Object(c["s"])(),Object(c["f"])("div",K,[Object(c["g"])("div",Q,[Object(c["g"])("h3",null,Object(c["z"])(r.item.Produkttitel),1),Object(c["g"])("h4",null,"Im Einkaufswagen: "+Object(c["z"])(r.item.quantity),1),Object(c["g"])("h4",null,"Gesamtpreis: "+Object(c["z"])(u.item_cost.toFixed(2))+"€",1)])])}var V={props:["item"],computed:{item_cost:function(){return this.item.PreisBrutto*this.item.quantity}}};r("d282");const W=d()(V,[["render",R]]);var U=W,X={class:"cart-item-card"};function Y(t,e,r,n,o,u){return Object(c["s"])(),Object(c["f"])("div",X,[Object(c["g"])("h3",null,"Gesamtpreis: "+Object(c["z"])(u.cart_total.toFixed(2))+" €",1),Object(c["g"])("button",{class:"view-product-button",onClick:e[0]||(e[0]=function(t){return u.goToStripe()})}," Bezahlen mit Stripe ")])}r("fb6a");var Z={props:["itmes"],methods:{goToStripe:function(){window.open("https://iws107.informatik.htw-dresden.de/ewa/g11/PHP/Stripe/receive_order.php?order="+this.cart_string.slice(0,-1)),console.log(this.cart_string.slice(0,-1))}},computed:{cart_total:function(){return this.$store.getters.cartItems.reduce((function(t,e){return t+e.PreisBrutto*e.quantity}),0)},cart_string:function(){return this.$store.getters.cartItems.reduce((function(t,e){return e.ProduktID+"-"+e.quantity+"_"+t}),"")}}};const tt=d()(Z,[["render",Y]]);var et=tt,rt={components:{CartItemCard:U,CartSummaryPaymentCard:et},computed:{items:function(){return this.$store.getters.cartItems}}};const ct=d()(rt,[["render",A]]);var nt=ct,ot={name:"Home",components:{ProductSummaryCard:D,ProductDescriptionDrawer:L,Cart:nt},data:function(){return{items:[],product:null,active:{product_drawer:!1},books:[],BookSearchString:""}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://iws107.informatik.htw-dresden.de/ewa/g11/PHP/beleg_fetch.php").then((function(t){return t.json()})).then((function(e){return t.items=e})).catch((function(t){return console.log(t.message)}));case 2:case"end":return e.stop()}}),e)})))()},methods:{viewProduct:function(t){this.product=t,this.active.product_drawer=!0,console.log(this.product)},closeProductDrawer:function(){this.active.product_drawer=!1}},computed:{filteredBooks:function(){var t=this;return this.items.filter((function(e){return e.Produkttitel.match(t.BookSearchString)}))}}};r("f54e");const ut=d()(ot,[["render",v]]);var it=ut,at=[{path:"/",name:"Home",component:it},{path:"/cart",name:"Cart",component:nt}],st=Object(f["a"])({history:Object(f["b"])("/EWA22deploy/"),routes:at}),dt=st,lt=r("5530"),bt=(r("e9c4"),r("7db0"),r("5502"));function ft(t){localStorage.setItem("cart",JSON.stringify(t))}var pt=Object(bt["a"])({state:{cart:[]},getters:{productQuantity:function(t){return function(e){var r=t.cart.find((function(t){return t.ProduktID===e.ProduktID}));return r?r.quantity:null}},cartItems:function(t){return t.cart}},mutations:{addToCart:function(t,e){var r=t.cart.find((function(t){return t.ProduktID===e.ProduktID}));console.log(r),r?r.quantity++:t.cart.push(Object(lt["a"])(Object(lt["a"])({},e),{},{quantity:1})),ft(t.cart)},removeFromCart:function(t,e){var r=t.cart.find((function(t){return t.ProduktID===e.ProduktID}));r&&(r.quantity>1?r.quantity--:t.cart=t.cart.filter((function(t){return t.ProduktID!==e.ProduktID}))),ft(t.cart)},updateCartFromLocalStorage:function(t){var e=localStorage.getItem("cart");e&&(t.cart=JSON.parse(e))}},actions:{},modules:{}});Object(c["c"])(b).use(pt).use(dt).mount("#app")},"693a":function(t,e,r){},a72e:function(t,e,r){"use strict";r("0f89")},d282:function(t,e,r){"use strict";r("e9dc")},e3e4:function(t,e,r){},e9dc:function(t,e,r){},f54e:function(t,e,r){"use strict";r("1f68")},f560:function(t,e,r){"use strict";r("e3e4")},fb73:function(t,e,r){"use strict";r("693a")}});
//# sourceMappingURL=app.2231d2e1.js.map